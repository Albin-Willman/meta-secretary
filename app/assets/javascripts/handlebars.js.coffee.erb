ready = ->
  $('.<%= MetaDefines::Handlebars::TEMPLATE_CLASS %>').each ->
    element  = $(this)
    source   = $('#' + element.attr('data-id')).html()
    template = Handlebars.compile(source)

    $.getJSON(element.attr('data-url'), (dataContext) ->
      html = template(dataContext)
      $('#' + element.attr('data-target-id')).html(html)
    )

$(document).ready(ready)
$(document).on('page:load', ready)
